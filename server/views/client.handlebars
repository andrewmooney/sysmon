<svg width="960" height="500"></svg>

<script>
    // Select render element



// _id
// cpu_perc
// hostname
// name
// smem_perc
// timestamp
// vmem_perc

    // Getting data from api
    d3.json('/api/help-tst', function(error, data) {
        if (error) throw error;

        var svg = d3.select('svg');
        var parseTime = d3.timeParse('%Y%m%d');

        var cpu = data.map(function(d) {
            return {x: parseTime(d.timestamp), y: d.cpu_perc}
        });

        drawLine(svg, cpu);
    });

    function drawLine(svg, data) {
        var margin = {top: 20, right: 80, bottom: 30, left: 50},
        width = svg.attr('width') - margin.left - margin.right,
        height = svg.attr('height') - margin.top - margin.bottom,
        g = svg.append('g').attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');

        var x = d3.scaleTime()
            .rangeRound([0, width]);

        var y = d3.scaleLinear()
            .rangeRound([height, 0]);

        var line = d3.line()
            .x(function(d) { return x(d.x) })
            .y(function(d) { return y(d.y) }) 
        
        g.append('path')
            .classed('lines', true)
            .datum(data)
            .attr('d', line);
    }


    function type(d) {
        d.date = parseTime(d.date);
        return d;
    }



    /*var labels = [], cpuData = [], vmemData = [], smemData = [];
    results.forEach(function (perf) {
        labels.push(new Date(perf.timestamp));
        cpuData.push(parseFloat(perf.cpu_perc));
        vmemData.push(parseFloat(perf.vmem_perc));
        smemData.push(parseFloat(perf.smem_perc));
    });*/
</script>